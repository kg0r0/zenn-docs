---
title: "OAuth 2.1ã®å·®åˆ†ã‚’è¦‹å®ˆã‚‹ä¼š : draft 07-08"
emoji: "ğŸ“Œ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["OAuth", "ietf", "rfc"]
published: false
---

æœ¬æŠ•ç¨¿ã¯ OAuth 2.1 ã£ã¦å‘¼ã°ã‚ŒãŸã„æ„Ÿã‚’å‡ºã—ã¦ã‚‹ä»•æ§˜ã®å·®åˆ†ã‚’è¦‹å®ˆã‚‹ä¼šã§ã™ã€‚

æœ¬æŠ•ç¨¿å«ã‚ã€å·®åˆ†ã‚’ ã‚¹ã‚¯ãƒ©ãƒƒãƒ— - [OAuth 2.1ã‚’è¦‹å®ˆã‚‹ä¼š](https://zenn.dev/ritou/scraps/098107802f952b) ã§ã¾ã¨ã‚ã¦ã„ã¾ã™ã€‚

## å·®åˆ†

[å·®åˆ†](https://author-tools.ietf.org/iddiff?url1=draft-ietf-oauth-v2-1-07&url2=draft-ietf-oauth-v2-1-08&difftype=--html)


[draft08](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-1-08) ã«ãŠã‘ã‚‹ä¸»ãªå·®åˆ†ã¨ã—ã¦ã¯ã€[Appendix E. Document History](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-1-08#name-document-history-8) ã«è¨˜è¼‰ã®ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚ä¸€è¦‹å¤‰æ›´ç‚¹ãŒå¤šã„ã‚ˆã†ã«è¦‹å—ã‘ã‚‰ã‚Œã¾ã™ãŒã€æ–°ã—ã„å†…å®¹ã®è¿½åŠ è‡ªä½“ã¯å°‘ãªã‚ã§é–¢é€£ä»•æ§˜ã«åˆã‚ã›ãŸè¡¨ç¾ã®ä¿®æ­£ãªã©ãŒå¤šã„å°è±¡ã§ã™ã€‚
å¿µã®ãŸã‚ã€ä¸Šã‹ã‚‰è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚ãªãŠã€å½“æ–¹ã®ä¸»è¦³ã§å¯¾å¿œã™ã‚‹å¤‰æ›´ã‚’è¨˜è¼‰ã—ã¦ã„ã¾ã™ãŒã€èªè­˜ãŒé–“é•ã£ã¦ã„ã‚‹å¯èƒ½æ€§ã¯ååˆ†ã‚ã‚Šã¾ã™ã€‚ã‚‚ã—ã€èªè­˜é–“é•ã£ã¦ã„ã‚‹ç®‡æ‰€ãŒã‚ã‚Œã° [GitHub](https://zenn.dev/kg0r0) ã‹ã‚‰ Issue ã¾ãŸ PR ã‚’ä½œæˆã—ã¦ã”æŒ‡æ‘˜ã„ãŸã ã‘ã¾ã™ã¨å¹¸ã„ã§ã™ã€‚

> * Updated acknowledgments
> * Swap "by a trusted party" with "by an outside party" in client ID definition
> * Replaced "verify the identity of the resource owner" with "authenticate"
> * Clarified refresh token rotation to match RFC6819
> * Added appendix to hold application/x-www-form-urlencoded examples
> * Fixed references to entries in appendix
> * Incorporated new "Phishing via AS" section from Security BCP
> * Rephrase description of the motivation for client authentication
> * Moved "scope" parameter in token request into specific grant types to match OAuth 2.0
> * Updated Clickjacking and Open Redirection description from the latest version of the Security BCP
> * Moved normative requirements out of authorization code security considerations section
> * Security considerations clarifications, and removed a duplicate section

### Updated acknowledgments

Acknowledgments ã‚’æ›´æ–°ã—ãŸã¨ã®ã“ã¨ã§ç‰¹ã«è¨€åŠã™ã‚‹ç‚¹ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

![](/images/2324f2ed833cf3/appendix_d.png)

### Swap "by a trusted party" with "by an outside party" in client ID definition

"trusted party" ã‹ã‚‰ "an outside party" ã«è¡¨ç¾ãŒå¤‰æ›´ã•ã‚Œã¦ã„ã¾ã™ã€‚å¤‰æ›´ç®‡æ‰€ã®å…¨ä½“ã‚’è¦‹ã‚‹é™ã‚Šã€å½“è©² Authorization Server ä»¥å¤–ãŒç™ºè¡Œã—ãŸã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ ID ã‚’æ‰±ã†ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã«ã¤ã„ã¦ã®ã‚ˆã†ã§ã™ã€‚ã“ã®å ´åˆã€å½“è©² Authorization Server ãŒå¿…ãšã—ã‚‚ä¿¡é ¼ã—ã¦ã„ã‚‹å¿…è¦ã¯ãªãã€ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã‚’é™å®šã—ãªã„è¡¨ç¾ã«å¤‰æ›´ã•ã‚ŒãŸã¨ã„ã†ã“ã¨ã§ã—ã‚‡ã†ã‹ã€‚

![](/images/2324f2ed833cf3/2_2.png)

### Replaced "verify the identity of the resource owner" with "authenticate"

"verify the identity of the resource owner" ã‹ã‚‰ "authenticate" ã«è¡¨ç¾ãŒå¤‰æ›´ã•ã‚Œã¦ã„ã¾ã™ã€‚å¤‰æ›´ç®‡æ‰€ã¯ Authorization Endpoint ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ã‚ˆã†ã§ã™ã€‚ãƒªã‚½ãƒ¼ã‚¹ã‚ªãƒ¼ãƒŠãƒ¼ã® ID ã‚’æ¤œè¨¼ã™ã‚‹ã®ã§ã¯ãªãã€ãƒ¦ãƒ¼ã‚¶ãƒ¼åãŠã‚ˆã³ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¨ã„ã£ãŸã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«ã‚‚å«ã‚ã¦æ¤œè¨¼ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãŸã‚èª¤è§£ã®ãªã„ã‚ˆã†ãªè¡¨ç¾ã«å¤‰æ›´ã•ã‚ŒãŸã¨ã„ã†ã“ã¨ã§ã—ã‚‡ã†ã‹ã€‚ã¾ãŸã€åœ°å‘³ã« passkey ã‚„ federated login ã¨ã£ãŸè¨˜è¼‰ã‚‚å¢—ãˆã¦ãŠã‚Šã€æ–°ã—ã„ä»•æ§˜ãªã©ã‚‚è€ƒæ…®ã—ãŸè¨˜è¼‰ã«ãªã£ã¦ã„ã¾ã™ã€‚

![](/images/2324f2ed833cf3/3_3.png)

### Clarified refresh token rotation to match RFC6819

ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒˆãƒ¼ã‚¯ãƒ³ã®ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã«é–¢ã™ã‚‹å·®åˆ†ã¯ä»¥ä¸‹ã®ç®‡æ‰€ãã‚‰ã„ã§ã—ãŸã€‚ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å¤±åŠ¹ã•ã›ã‚‹ã ã‘ã§ã¯ãªãèªå¯ã‚‚å–ã‚Šæ¶ˆã™ã‚ˆã†ã«è¡¨ç¾ãŒè¿½è¨˜ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚

![](/images/2324f2ed833cf3/4_3_1.png)

### Added appendix to hold application/x-www-form-urlencoded examples

"[Original Appendix B was removed but non-link references remain](https://github.com/oauth-wg/oauth-v2-1/issues/128)" ã¨ã„ã† Issue ã§ã®è­°è«–å†…å®¹ãŒåæ˜ ã•ã‚Œã‚‹äºˆå®šã¨ã®ã“ã¨ã§ã™ã€‚
URL ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã ã‘ã§ãªãã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ ID ãŠã‚ˆã³ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã«ãŠã„ã¦ã‚‚ application/x-www-form-urlencoded ãŒä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŠã‚ˆã³ãã®ä¾‹ãŒè¨˜è¼‰ã•ã‚Œã‚‹äºˆå®šã®ã‚ˆã†ã§ã™ã€‚

![](/images/2324f2ed833cf3/appendix_b.png)

### Fixed references to entries in appendix

Appendix ãŒè¿½åŠ ã•ã‚ŒãŸãŸã‚å„æ‰€ã§å‚ç…§ãŒä¿®æ­£ã•ã‚Œã¦ã„ã¾ã™ã€‚

![](/images/2324f2ed833cf3/appendix.png)

### Incorporated new "Phishing via AS" section from Security BCP

"Phishing via AS" ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒ Security BCP ã‹ã‚‰è¿½è¨˜ã•ã‚ŒãŸã‚ˆã†ã§ã™ã€‚
æ”»æ’ƒè€…ãŒç”¨æ„ãƒ»ç´°å·¥ã—ãŸ Authorization / Authentication Request ã‚’è¢«å®³è€…ã«é€ä¿¡ã•ã›ã‚‹ç³»ã®æ”»æ’ƒãƒã‚¿ãƒ¼ãƒ³ãŒå…·ä½“çš„ã«è¨˜è¼‰ã•ã‚Œã¾ã—ãŸã€‚

![](/images/2324f2ed833cf3/7_13_2.png)

### Rephrase description of the motivation for client authentication

ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆèªè¨¼ã«é–¢ã™ã‚‹èª¬æ˜ã®è¡¨ç¾ãŒå¤‰æ›´ã•ã‚Œã¦ã„ã¾ã™ã€‚ä¾‹ã‚’æŒ™ã’ã¦èª¬æ˜ã—ã¦ã„ãŸã‚ˆã†ãªéƒ¨åˆ†ãŒã‚ˆã‚Šæ˜ç¢ºãªè¨˜è¼‰ã«ãªã£ãŸå°è±¡ã§ã™ã€‚

![](/images/2324f2ed833cf3/2_1.png)

### Moved "scope" parameter in token request into specific grant types to match OAuth 2.0

ãƒˆãƒ¼ã‚¯ãƒ³ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«è¨˜è¼‰ã•ã‚Œã¦ã„ãŸ "scope" ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã®èª¬æ˜ãŒç‰¹å®šã®ã‚°ãƒ©ãƒ³ãƒˆã‚¿ã‚¤ãƒ—ã®èª¬æ˜ã«ç§»å‹•ã—ã¾ã—ãŸã€‚

![](/images/2324f2ed833cf3/3_2_2.png)

### Updated Clickjacking and Open Redirection description from the latest version of the Security BCP

ã‚¯ãƒªãƒƒã‚¯ã‚¸ãƒ£ãƒƒã‚­ãƒ³ã‚°ãŠã‚ˆã³ã‚ªãƒ¼ãƒ—ãƒ³ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã«é–¢ã™ã‚‹èª¬æ˜ãŒæœ€æ–°ã® Security BCP ã«åˆã‚ã›ã‚‹ã‚ˆã†ã«æ›´æ–°ã•ã‚ŒãŸã‚ˆã†ã§ã™ã€‚

![](/images/2324f2ed833cf3/7_11.png)

![](/images/2324f2ed833cf3/7_13.png)

### Moved normative requirements out of authorization code security considerations section

Security Considerations ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«è¨˜è¼‰ã•ã‚Œã¦ã„ãŸèªå¯ã‚³ãƒ¼ãƒ‰ã«é–¢ã™ã‚‹è¨˜è¿°ãŒ Security Considerations ä»¥å¤–ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ç§»å‹•ã—ãŸã‚ˆã†ã§ã™ã€‚

![](/images/2324f2ed833cf3/7_6.png)

### Security considerations clarifications, and removed a duplicate section

Security Considerations ã‚»ã‚¯ã‚·ãƒ§ãƒ³ä¸­ã«ç´°ã‹ã„è¡¨ç¾ã®ä¿®æ­£ã‚„é‡è¤‡ç®‡æ‰€ã®å‰Šé™¤ãŒè¦‹å—ã‘ã‚‰ã‚Œã¾ã™ã€‚

![](/images/2324f2ed833cf3/7_15.png)

### ãŠã‚ã‚Š

æ–°è¦ãƒˆãƒ”ãƒƒã‚¯ã®è¿½åŠ ãªã©ã¯ç„¡ãã€é©åˆ‡ãªæœ€æ–°ã®æ‹¡å¼µä»•æ§˜ã‚’å‚ç…§ã™ã‚‹ã‚ˆã†ã«ã™ã‚‹ã¨ã„ã£ãŸå¤‰æ›´ãŒå¤šã„ã‚ˆã†ã«è¦‹å—ã‘ã‚‰ã‚Œã¾ã—ãŸã€‚
ç´ äººæ„è¦‹ã§ã™ãŒä»•æ§˜ã¨ã—ã¦ã®å®Œæˆåº¦ã‚’é«˜ã‚ã¦ã„ãã‚ˆã†ãªæ®µéšã®ã‚ˆã†ã«ã‚‚æ€ãˆã¾ã™ã€‚
ã§ã¯ã¾ãŸï¼